# 3. Tech Stack

This is the **DEFINITIVE** technology selection for SmartScheduler. All development must use these exact versions and technologies.

## 3.1 Technology Stack Table

| **Category**                | **Technology**                            | **Version**           | **Purpose**                      | **Rationale**                                                                                                                                                            |
| --------------------------- | ----------------------------------------- | --------------------- | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Backend Language**        | C#                                        | 12.0                  | Backend API implementation       | Mandatory per PRD; C# 12 ships with .NET 8; modern features (primary constructors, collection expressions) improve code clarity                                          |
| **Backend Framework**       | ASP.NET Core                              | 8.0.21                | Web API framework                | Latest .NET 8 LTS; SignalR built-in; proven production stability; excellent performance (<500ms API response target achievable)                                          |
| **API Style**               | REST                                      | -                     | HTTP API design                  | Simple, well-understood, broad tooling support; complexity doesn't justify GraphQL overhead; tRPC requires full TypeScript backend                                       |
| **ORM**                     | Entity Framework Core                     | 8.0.11                | Database access layer            | Native .NET 8 integration; LINQ queries; code-first migrations; strong typing eliminates runtime errors                                                                  |
| **Database**                | PostgreSQL                                | 16.6                  | Primary data store               | ACID transactions critical for job assignment consistency; relational model natural fit for Jobs ↔ Contractors ↔ Reviews; complex scoring queries benefit from SQL JOINs |
| **PostgreSQL Driver**       | Npgsql.EntityFrameworkCore.PostgreSQL     | 8.0.14                | EF Core PostgreSQL provider      | Official EF Core provider for PostgreSQL; full feature support (JSON, arrays, full-text search); actively maintained                                                     |
| **Cache**                   | Redis (AWS ElastiCache)                   | 7.1                   | Distance calculation caching     | Google Maps API rate limits require caching (24-hour TTL); contractor list caching (5-min TTL); sub-millisecond read latency                                             |
| **File Storage**            | AWS S3                                    | -                     | Static asset storage (future)    | Reserved for Phase 2 (contractor photos, customer uploads); S3 standard storage class sufficient                                                                         |
| **Authentication**          | JWT + ASP.NET Core Identity               | Built-in              | User authentication              | JWT stateless tokens enable horizontal scaling; Identity framework handles password hashing (BCrypt), user management; refresh tokens for long-lived sessions            |
| **Authorization**           | Role-Based Access Control (RBAC)          | Built-in              | Endpoint protection              | `[Authorize(Roles = "Dispatcher")]` attributes; three roles (Dispatcher, Customer, Contractor); enforced at API layer                                                    |
| **Real-Time Communication** | SignalR                                   | 8.0 (Built-in)        | WebSocket messaging              | Mandatory per PRD; <100ms latency requirement; automatic fallback (WebSocket → Server-Sent Events → Long Polling); native .NET integration eliminates third-party risk   |
| **Validation**              | FluentValidation                          | 11.11.0               | Request validation               | Expressive, testable validation rules; separation from domain entities; better error messages than DataAnnotations                                                       |
| **CQRS Mediator**           | MediatR                                   | 12.4.1                | Command/Query pattern            | Clean CQRS implementation; request pipelines (validation, logging); decouples handlers from controllers                                                                  |
| **Logging**                 | Serilog                                   | 8.0.3                 | Structured logging               | Structured JSON logs to CloudWatch; log correlation via request ID; performance profiling support                                                                        |
| **Email Service**           | AWS SES                                   | -                     | Transactional email              | AWS-native; $0.10 per 1000 emails; 50,000 free emails/month; HTML templates; delivery tracking                                                                           |
| **Mapping API**             | Google Maps Distance Matrix API           | -                     | Distance/travel time calculation | Accurate real-time travel times; batch requests (25 origins × 25 destinations); alternative: OpenRouteService (cost-sensitive fallback)                                  |
| **Frontend Language**       | TypeScript                                | 5.9.2                 | Frontend type safety             | Strict mode enabled; catches errors at compile time; IntelliSense improves developer velocity; no `any` allowed except edge cases                                        |
| **Frontend Framework**      | React                                     | 18.3.1                | UI framework                     | Latest stable React 18; Concurrent features (useTransition for non-blocking updates); functional components + hooks only; no class components                            |
| **UI Component Library**    | shadcn/ui                                 | 0.9.0                 | Prebuilt components              | Copy-paste components (not npm dependency); Radix UI primitives (accessibility built-in); Tailwind CSS styling; customizable; eliminates button/form boilerplate         |
| **CSS Framework**           | Tailwind CSS                              | 4.0.0                 | Utility-first styling            | Rapid prototyping; consistent spacing (8px grid); tree-shaking eliminates unused CSS; design tokens for theme consistency                                                |
| **State Management**        | React Context API + useReducer            | Built-in              | Global state                     | Sufficient for app complexity; AuthContext (user session), NotificationContext (SignalR messages); no Redux overhead                                                     |
| **Routing**                 | React Router                              | 7.9.4                 | Client-side routing              | Latest stable; type-safe routes; role-based route guards (`<ProtectedRoute role="Dispatcher" />`); lazy loading per route                                                |
| **HTTP Client**             | Axios                                     | 1.7.9                 | API communication                | Request/response interceptors (JWT token injection, error handling); timeout configuration; cancel tokens for cleanup                                                    |
| **Form Handling**           | React Hook Form                           | 7.54.2                | Form state management            | Uncontrolled components (performance); built-in validation; integrates with shadcn/ui form components                                                                    |
| **Date Handling**           | date-fns                                  | 4.1.0                 | Date manipulation                | Lightweight (tree-shakable); immutable; TypeScript support; simpler API than Moment.js                                                                                   |
| **Frontend Build Tool**     | Vite                                      | 6.0.7                 | Dev server & bundler             | Instant HMR (<100ms); esbuild for dependencies (10-100x faster than Webpack); native ESM; production build <2s                                                           |
| **Bundler**                 | Rollup (via Vite)                         | Built-in              | Production bundling              | Vite uses Rollup for production; tree-shaking; code splitting by route; terser minification                                                                              |
| **Package Manager**         | npm                                       | 10.x                  | Dependency management            | Native workspace support (monorepo); fast install; npm audit for security                                                                                                |
| **Backend Testing**         | xUnit + FluentAssertions                  | 2.9.2 + 6.12.2        | Unit/integration tests           | xUnit: .NET standard; FluentAssertions: readable assertions (`result.Should().BeEquivalentTo(expected)`); async test support                                             |
| **Frontend Testing**        | Vitest + React Testing Library            | 2.1.8 + 16.1.0        | Component tests                  | Vitest: Vite-native (instant test runs); RTL: user-centric queries (`getByRole`, `getByLabelText`); accessibility-focused                                                |
| **E2E Testing**             | Playwright                                | 1.49.1                | End-to-end tests                 | Cross-browser (Chromium, Firefox, WebKit); auto-wait (no flaky tests); trace viewer for debugging; TypeScript support                                                    |
| **Test Mocking**            | Moq + MSTest (Backend), Vitest (Frontend) | 4.20.72               | Mock dependencies                | Moq: fluent mocking API for .NET interfaces; Vitest: built-in mocking (vi.fn(), vi.mock())                                                                               |
| **Infrastructure as Code**  | AWS CDK (C#)                              | 2.175.1               | AWS resource provisioning        | Define infrastructure in C# (type-safe); synthesizes to CloudFormation; manages RDS, App Runner, S3, CloudFront, Secrets Manager                                         |
| **CI/CD**                   | GitHub Actions                            | -                     | Automated pipeline               | Free for public repos; matrix builds (test .NET + React in parallel); deploy to AWS on merge to main                                                                     |
| **Container Runtime**       | Docker                                    | 27.x                  | Backend containerization         | Multi-stage Dockerfile (build → runtime); slim runtime image (mcr.microsoft.com/dotnet/aspnet:8.0-alpine); <200MB final image                                            |
| **Container Registry**      | AWS ECR                                   | -                     | Docker image storage             | AWS-native; App Runner pulls images from ECR; vulnerability scanning; lifecycle policies (delete old images)                                                             |
| **Backend Hosting**         | AWS App Runner                            | -                     | Container orchestration          | Zero-config scaling (1-25 instances); auto-deploy on ECR push; HTTPS built-in; health checks; simpler than ECS/EKS                                                       |
| **Frontend Hosting**        | AWS S3 + CloudFront                       | -                     | Static site hosting              | S3: storage ($0.023/GB); CloudFront: global CDN (300+ edge locations); HTTPS (ACM certificates); cache invalidation via API                                              |
| **Database Hosting**        | AWS RDS PostgreSQL                        | -                     | Managed database                 | Automated backups (7-day retention); Multi-AZ for high availability (deferred to Phase 2); Read replicas for scaling (Phase 2)                                           |
| **Secrets Management**      | AWS Secrets Manager                       | -                     | Credential storage               | Database passwords, JWT secrets, Google Maps API key; automatic rotation support (Phase 2); IAM-based access control                                                     |
| **Monitoring**              | AWS CloudWatch                            | -                     | Logs & metrics                   | Centralized logging; custom metrics (API latency, recommendation query time); alarms (error rate >5% → SNS notification)                                                 |
| **Error Tracking**          | Serilog + CloudWatch Insights             | -                     | Error analysis                   | Structured logs enable CloudWatch Insights queries; filter by request ID; performance profiling via log correlation                                                      |
| **API Documentation**       | Swagger/OpenAPI                           | Built-in ASP.NET Core | Interactive API docs             | Auto-generated from C# attributes; Swagger UI at `/swagger`; API contracts visible to frontend devs; "Try it out" feature                                                |

## 3.2 Compatibility Notes

**Verified Compatibility:**

- ✅ **ASP.NET Core 8.0.21** + **Entity Framework Core 8.0.11** + **Npgsql 8.0.14** = Fully compatible (same major version)
- ✅ **React 18.3.1** + **TypeScript 5.9.2** + **React Router 7.9.4** = Tested combination; React Router 7 supports React 18+
- ✅ **shadcn/ui 0.9.0** + **Tailwind CSS 4.0** = shadcn components built on Tailwind; v4 compatible
- ✅ **Vite 6.0** + **React 18.3.1** + **TypeScript 5.9.2** = Official Vite React-TS template uses these versions
- ✅ **SignalR 8.0** (server) + **@microsoft/signalr 8.0.7** (client) = Version parity ensures protocol compatibility

---
